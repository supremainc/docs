---
id: migration-face
title: 顔マイグレーション
description: BioStar X の旧バージョンで登録した顔を最新のアルゴリズムにアップグレードして認識性能を向上できます。
keywords:
  - 顔
  - マイグレーション
  - 顔認証
---

**BioStar X** の旧バージョンで登録した顔を最新のアルゴリズムにアップグレードして認識性能を向上できます。 ユーザーを同期する際、顔画像を除いたテンプレートのみを送信するようプロトコルを改良し、同期に要する時間を大幅に短縮するとともに個人情報に関する問題の発生を防止できます。

## 開始する前に

顔マイグレーション機能を実行する前に、次の事項を確認してください。

:::note

**顔マイグレーションとは？**

BioStar X サーバーにすでに保存されているユーザーの画像から 2 種類の顔テンプレートを生成する機能です。 ユーザー同期時に顔をテンプレートのみで同期するには、<Cmd sid='team.menu.faceMigration' /> を実行する必要があります。

:::

### 対応デバイスおよびファームウェアバージョン

顔をテンプレートとして同期できるデバイスの一覧は以下を参照してください。

* FaceStation F2 ファームウェア v2.2.0 以上

* BioStation 3 ファームウェア v1.3.1 以上

* BioEntry W3 ファームウェア v1.0.0 以上

<details>

<summary>**FaceStation F2 v1.x.x ファームウェアのサポート終了案内**</summary>

**BioStar X** は、ユーザーの顔をデバイスへ同期する際にテンプレートのみを送信するよう変更し、同期性能を最適化しました。 そのため、デバイスでのみテンプレートを抽出できる FaceStation F2 v1.x.x ファームウェアのサポートは終了します。 現在 FaceStation F2 の 1.x.x バージョンのファームウェアを使用している場合、**BioStar X** を利用するには FaceStation F2 を最新ファームウェアへアップグレードしてください。

最新ファームウェアは[Suprema ダウンロードセンター](https://download.supremainc.com/)からダウンロードできます。

</details>

### 顔テンプレートタイプに関する注意事項

FaceStation F2 と BioStation 3、BioEntry W3 では、顔テンプレートタイプが異なります。

* **NPU タイプ**：BioStation 3、BioEntry W3

* **GPU タイプ**：FaceStation F2

:::note

* **顔テンプレートタイプが異なるデバイス間での同期所要時間**

  <Cmd sid='team.menu.faceMigration' /> を実行する前に、FaceStation F2 だけを接続して使用していた環境に BioStation 3 や BioEntry W3 を追加して同期すると、テンプレートタイプが異なるため画像から NPU タイプのテンプレートを抽出します。そのため、サーバーに登録されている顔の数によっては相当な時間がかかる場合があります。

* **BioStar X での顔登録を推奨**

  デバイスの **顔画像を保存** オプションを無効にした状態で顔を登録した場合、**BioStar X** にはテンプレートのみが同期されるため、顔テンプレートタイプが異なるデバイスへは同期できません。したがって、顔は **BioStar X** で登録することを推奨します。

:::

### デバイスに関する注意事項

**BioStar X** からエクスポートしたユーザーデータファイルには画像が含まれずテンプレートのみのため、旧ファームウェアを使用している FaceStation F2 および BioStation 3 へはユーザーデータファイルをインポートできません。

そのため、FaceStation F2 および BioStation 3 でデータファイルをエクスポートする場合は、以下のバージョン以上でのみエクスポートが可能です。

* FaceStation F2 ファームウェア v2.2.0 以上

* BioStation 3 ファームウェア v1.3.1 以上

:::caution

FaceStation F2、BioStation 3 を使用している場合は、最新バージョンのファームウェアへアップグレードすることを推奨します。 最新ファームウェアは[Suprema ダウンロードセンター](https://download.supremainc.com/)からダウンロードできます。

:::

## マイグレーションを実行

1. <Cmd sid='shell.header.launcher' /> ページで <Cmd sid='shell.header.user' /> をクリックします。

2. 画面右上の <IcMoreW/> ボタンを選択し、<Cmd sid='team.menu.faceMigration' /> ボタンをクリックしてください。

   <Image src='/img/biostarx-user-face-migration.png' />

3. 警告ポップアップの内容を確認し、<Cmd sid='common.button.continue' /> をクリックしてください。

   <Image src='/img/biostarx-user-face-migration-warning.png' width='60%' />

顔マイグレーションを実行します。 顔マイグレーションが完了すると、総顔数、成功件数および失敗件数を確認できるポップアップが表示されます。

* マイグレーションが成功したら、デバイスにユーザー情報を同期して変更を適用してください。 デバイスへユーザー情報を送信する方法の詳細は[次のドキュメント](transfer-user-info-to-device)を参照してください。

* 顔マイグレーションに失敗した場合、失敗したユーザーの一覧を CSV ファイルでダウンロードできます。 マイグレーションに失敗した顔を一括削除するには、<Cmd sid='common.delete' /> ボタンをクリックしてください。

:::info

* この機能は、ユーザー ID が **1** の管理者アカウントのみ使用できます。

* マイグレーションを実行中は、現在のページから離れないでください。

* ユーザーによっては、登録された顔画像のサイズが大きいほどテンプレート生成に時間がかかる場合があります。

* 顔 1,000 件の場合の所要時間は約 18 分で、サーバーの性能によって異なる場合があります。

* ユーザーの顔画像をサーバーに保存せずテンプレートのみを保存する方法の詳細は[次のドキュメント](settings-server-server#storevisualfaceimage)を参照してください。

:::
