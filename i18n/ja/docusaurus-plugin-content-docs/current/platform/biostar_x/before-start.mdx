---
id: before-start
title: 開始する前に
description: BioStar X を開始する前に知っておくべき事項を案内します。
keywords:
  - インストール案内
  - MariaDB
  - SQL Server
  - データベース
---

:::tip

**BioStar X** を開始する前に知っておくべき事項を案内します。 **BioStar X** は 64 ビットオペレーティングシステムをサポートします。 インストールする前に、**BioStar X** をインストールする PC のシステム仕様を確認してください。

:::

## インストール前の注意事項 {#before}

**BioStar X** をインストールする前に、次の事項を確認してからインストールを進めてください。

* **BioStar X** は 64 ビットオペレーティングシステムにのみインストールできます。

* MS SQL 2012 Express を使用する場合は [サービス パック 3](https://www.microsoft.com/download/details.aspx?id=49996) をインストールしてください。

* MS SQL 2014 Express を使用する場合は [サービス パック 2](https://www.microsoft.com/ko-kr/download/details.aspx?id=53168) をインストールしてください。

* MS SQL Server を使用する場合は、サーバーと各テーブルの `Collation` オプションを CI（大文字小文字を区別しない）に設定してください。

* 旧バージョンの **BioStar X** でデータベースをバックアップする際は、すべてのサービスを停止してから実行してください。 また、AC データベースと TA データベースを同時にバックアップして復元しないと、TA データベースを使用できません。

* **BioStar X** データベースをバックアップする際は、*\\Program Files\\BioStar X\\util* フォルダーの *enckey* ファイルと *\\Program Files\\BioStar X* フォルダーの *system.conf*、*setting.conf* ファイルも必ず一緒にバックアップしてください。 これを行わないと、データベースが使用できなくなります。

* **BioStar X** が使用するポートのデフォルト値は [次のドキュメント](service-settings) を参照してください。 他のプログラムが同じポートを占有している場合、**BioStar X** が正常に動作しない可能性があります。

## データベースの確認 {#checkdb}

**BioStar X** をインストールする前に、ユーザーが独自に構成したデータベースを使用する場合は、以下の事項を確認してください。

### MariaDB {#mariadb}

1. *my.cnf* ファイルの `[mysql]` セクションの下にあるオプションを次のように変更してください。

   ```ini title='my.cnf'
   character-set-server=utf8
   collation-server=utf8_unicode_ci
   max_connections = 600
   ```

2. *my.cnf* ファイルの `[mysql]` セクションの下に次のオプションを追加してください。

   ```ini title='my.cnf'
   log_bin_trust_function_creators = 1
   group_concat_max_len = 102400
   ```

3. root 権限で MariaDB に接続し、次のコマンドを実行してください。

   ```sql title='SQL'
   GRANT SUPER ON . TO user_id@'localhost' IDENTIFIED BY "password";
   GRANT SUPER ON . TO user_id@'%' IDENTIFIED BY "password";
   ```

### MS SQL Server {#ms-sql-server}

:::info

* すべてのデータベースとテーブルの `Collation` オプションを、大文字小文字を区別しない CI（Case-insensitive）に設定してください。

* データベース名には、数字、英字（大文字小文字を区別）、特殊記号 `-` と `_` のみを使用できます。

:::

#### ポート設定 {#port-setting}

* **SQL Server 構成マネージャー** を起動し、**SQL EXPRESS に対するプロトコル** の **TCP/IP プロトコル** を使用したいポート番号に設定してください。

* 設定を適用するには、SQL Server サービスを再起動してください。

#### ユーザーとデータベースの作成 {#create-a-user-and-database}

1. **SQL Server Management Studio** で **SQL Server 認証** を使用して **sa** アカウントでログインしてください。

2. **セキュリティ** を右クリックし、**新しいログイン** をクリックしてください。

3. **ログイン名** フィールドに任意の名前を入力し、**SQL Server 認証** を選択してください。

4. **パスワード** と **パスワード確認** フィールドに使用するパスワードを入力し、**パスワード ポリシーの適用を強制** を無効にしてください。

5. **OK** をクリックしてください。

6. **データベース** を右クリックし、**新しいデータベース** をクリックしてください。

7. **データベース名** フィールドに任意の名前を入力してください。

8. **所有者** フィールドに手順 3 で設定したログイン名を入力してください。

:::tip

**データベース ファイル** セクションで、以下の推奨値に設定します。 **自動増加** はパーセンテージではなく固定サイズ (MB/GB) で設定し、あまりにも小さい単位で頻繁に増加しないよう注意してください。

<Image src='/img/biostarx-before-start-new-database.png' caption />

#### 小規模組織 (10 GB 以下)

* データ：**初期サイズ** 1～5 GB、**自動増加** 100～512 MB

* ログ：**初期サイズ** 512 MB～2 GB、**自動増加** 100～512 MB

* TempDB：**初期サイズ** 512 MB～1 GB

> 例：データ 2 GB (**自動増加** 256 MB) / ログ 1 GB (**自動増加** 128 MB) / TempDB 512 MB

#### 中規模組織 (10～500 GB)

* データ：**初期サイズ** 10～50 GB、**自動増加** 512 MB～1 GB

* ログ：**初期サイズ** 5～10 GB、**自動増加** 512 MB～1 GB

* TempDB：**初期サイズ** 2～8 GB

> 例：データ 20 GB (**自動増加** 1 GB) / ログ 5 GB (**自動増加** 512 MB) / TempDB 4 GB

#### 大規模組織 (500 GB 以上)

* データ：**初期サイズ** 100 GB 以上、**自動増加** 1～4 GB

* ログ：**初期サイズ** 20～100 GB、**自動増加** 1～4 GB

* TempDB：**初期サイズ** 8～32 GB

> 例：データ 100 GB (**自動増加** 2 GB) / ログ 50 GB (**自動増加** 2 GB) / TempDB 16 GB

:::

:::caution

* **自動増加** を極端に小さい単位で設定したり、**最大サイズ** を **無制限** に設定したりせず、予想される増加量に応じて適切に設定するか、モニタリングしてください。

* トランザクションが多い環境では、ログを定期的にバックアップしてログ ファイルのサイズが増加しないよう注意してください。

:::

#### Windows 認証データベース設定 {#windows-authentication-database-settings}

<Steps>
<Step>

##### 事前設定 {#preliminary-setting}

**Microsoft Windows Active Directory** を使用する場合は、Windows 認証データベースを設定する前に、以下の事前設定を完了してください。

1. **SQL Server Management Studio** に管理者アカウントでログインしてください。

2. **セキュリティ** を右クリックし、**新しいログイン** をクリックしてください。

3. **Windows 認証** を選択して **検索** をクリックしてください。

4. **ユーザーまたはグループの選択** ウィンドウで [場所] をクリックし、Active Directory のパスを選択して **OK** をクリックしてください。

5. **選択するオブジェクト名を入力してください** フィールドにユーザー名を入力し、**名前の確認** \> **OK** をクリックしてください。

6. **[ページの選択]** で **サーバー ロール** をクリックしてください。

7. **sysadmin** を選択して **OK** をクリックしてください。

8. **[ページの選択]** で **ユーザー マッピング** をクリックしてください。

9. **ac**、**master**、**ta**、**ve** を選択し、**既定のスキーマ** を **dbo** に設定してください。

10. **OK** をクリックして保存してください。

</Step>
<Step>

##### Active Directory アカウントで MS SQL Windows Authentication を使用するための設定 {#settingsforusingmssql}

1. *services.msc* を実行してください。

2. SQL Server データベースの **プロパティ** \> **ログオン** 画面で **アカウント指定** を選択し、ドメイン ユーザーでログインしてください。

3. Windows ファイアウォールに 1433 ポートを例外として追加してください。

4. SQL Server に空の **ac**、**ta**、**ve** データベースを **sysadmin** 権限で作成してください。

5. SQL Server でドメイン ユーザーが Windows Authentication を使用できるように設定し、**ac**、**ta**、**ve** データベースに **sysadmin** 以外のすべての権限を割り当てます。

6. ローカル コンピューターを除くすべてのサービスを *services.msc* で接続します。

7. ドメイン ユーザーをローカル サービス コンピューターの管理者に設定します。

8. MS SQL ODBC を接続します。

</Step>
<Step>

##### データベース設定 {#database-setting}

1. **SQL Server 構成マネージャー** を起動し、**SQL Native Client** 配下の **クライアント プロトコル** をクリックします。

2. **TCP/IP** を選択し、既定ポートを確認します。

3. **SQL Server ネットワーク構成** 配下の **SQL EXPRESS に対するプロトコル** をクリックします。

4. **TCP/IP** で ODBC ポートが既定ポートと同じに設定されていることを確認します。

5. **SQL Server Management Studio** に管理者アカウントで接続します。

6. **セキュリティ** \> **ログイン** をクリックし、**NT AUTHORITY\\SYSTEM** をダブルクリックします。

7. **[ページの選択]** で **サーバー ロール** をクリックしてください。

8. **public** と **sysadmin** を選択してチェックし、**OK** をクリックします。

9. **[ページの選択]** で **ユーザー マッピング** をクリックしてください。

10. **ac**、**ta**、**ve** データベースを選択し、**OK** をクリックして保存します。

</Step>

</Steps>

<NextStep>
<NextItem to='system-requirements'>

**BioStar X** をインストールするためのシステム最小要件を確認します。

</NextItem>
<NextItem to='express-install'>

初めてインストールするユーザー向けの簡易インストール手順を案内します。

</NextItem>
<NextItem to='custom-install'>

既にインストール済みのデータベースと連携するためのカスタムインストール手順を案内します。

</NextItem>
</NextStep>
